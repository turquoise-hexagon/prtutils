#!/usr/bin/env bash
#
# create package from installed files

read -r version release <<< $(
    prt-get printf '%v %r' --filter="$1"
)

[[ $version ]] || {
    echo "usage : ${0##*/} [package]" >&2
    exit 1
}

pwd=$PWD

cd /

tar czvf "$pwd/$1#$version-$release.pkg.tar.gz" $(
    while read -r line; do
        [[ -d $line ]] || echo "$line"
    done < <(pkginfo -l "$1")
)
